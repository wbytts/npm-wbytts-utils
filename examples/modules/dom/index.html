<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM 操作模块示例 - @wbytts/utils</title>
    <link rel="stylesheet" href="../../shared/styles/common.css">
    <style>
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .demo-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        
        .demo-item {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 6px;
            border-left: 4px solid #007bff;
        }
        
        .demo-element {
            padding: 10px;
            margin: 10px 0;
            background: #e3f2fd;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .demo-element.active {
            background: #4caf50;
            color: white;
        }
        
        .demo-element.error {
            background: #f44336;
            color: white;
        }
        
        .demo-element.warning {
            background: #ff9800;
            color: white;
        }
        
        .button-group {
            margin: 10px 0;
        }
        
        .button-group button {
            margin: 5px;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            background: #007bff;
            color: white;
            cursor: pointer;
        }
        
        .button-group button:hover {
            background: #0056b3;
        }
        
        .result-display {
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>DOM 操作模块示例</h1>
            <p>展示 @wbytts/utils/dom 模块的各种功能</p>
        </header>

        <nav class="navigation">
            <a href="#class-operations">类名操作</a>
            <a href="#style-operations">样式操作</a>
            <a href="#attribute-operations">属性操作</a>
            <a href="#content-operations">内容操作</a>
            <a href="#element-operations">元素操作</a>
            <a href="#event-operations">事件操作</a>
        </nav>

        <main class="main-content">
            <!-- 类名操作示例 -->
            <section id="class-operations" class="demo-section">
                <h2 class="demo-title">类名操作</h2>
                
                <div class="demo-item">
                    <h3>addClass / removeClass / toggleClass</h3>
                    <div id="class-demo" class="demo-element">
                        点击按钮查看类名变化
                    </div>
                    <div class="button-group">
                        <button onclick="addClassDemo()">添加 active 类</button>
                        <button onclick="removeClassDemo()">移除 active 类</button>
                        <button onclick="toggleClassDemo()">切换 active 类</button>
                        <button onclick="checkClassDemo()">检查是否有 active 类</button>
                    </div>
                    <div id="class-result" class="result-display"></div>
                </div>
            </section>

            <!-- 样式操作示例 -->
            <section id="style-operations" class="demo-section">
                <h2 class="demo-title">样式操作</h2>
                
                <div class="demo-item">
                    <h3>setStyle / getStyle</h3>
                    <div id="style-demo" class="demo-element">
                        样式操作演示元素
                    </div>
                    <div class="button-group">
                        <button onclick="setColorDemo()">设置颜色为红色</button>
                        <button onclick="setFontSizeDemo()">设置字体大小</button>
                        <button onclick="setMultipleStylesDemo()">设置多个样式</button>
                        <button onclick="getStyleDemo()">获取当前样式</button>
                        <button onclick="resetStyleDemo()">重置样式</button>
                    </div>
                    <div id="style-result" class="result-display"></div>
                </div>
            </section>

            <!-- 属性操作示例 -->
            <section id="attribute-operations" class="demo-section">
                <h2 class="demo-title">属性操作</h2>
                
                <div class="demo-item">
                    <h3>setAttribute / getAttribute / removeAttribute</h3>
                    <div id="attr-demo" class="demo-element" title="初始标题">
                        属性操作演示元素
                    </div>
                    <div class="button-group">
                        <button onclick="setAttributeDemo()">设置 data-id 属性</button>
                        <button onclick="setTitleDemo()">设置 title 属性</button>
                        <button onclick="getAttributeDemo()">获取 title 属性</button>
                        <button onclick="removeAttributeDemo()">移除 data-id 属性</button>
                        <button onclick="checkAttributeDemo()">检查属性存在</button>
                    </div>
                    <div id="attr-result" class="result-display"></div>
                </div>
            </section>

            <!-- 内容操作示例 -->
            <section id="content-operations" class="demo-section">
                <h2 class="demo-title">内容操作</h2>
                
                <div class="demo-item">
                    <h3>setText / getText / setHTML / getHTML</h3>
                    <div id="content-demo" class="demo-element">
                        <span>原始内容</span>
                    </div>
                    <div class="button-group">
                        <button onclick="setTextDemo()">设置文本内容</button>
                        <button onclick="setHTMLDemo()">设置 HTML 内容</button>
                        <button onclick="getTextDemo()">获取文本内容</button>
                        <button onclick="getHTMLDemo()">获取 HTML 内容</button>
                        <button onclick="resetContentDemo()">重置内容</button>
                    </div>
                    <div id="content-result" class="result-display"></div>
                </div>
            </section>

            <!-- 元素操作示例 -->
            <section id="element-operations" class="demo-section">
                <h2 class="demo-title">元素操作</h2>
                
                <div class="demo-item">
                    <h3>createElement / appendChild / removeChild</h3>
                    <div id="element-demo" class="demo-element">
                        <p>容器元素</p>
                    </div>
                    <div class="button-group">
                        <button onclick="createElementDemo()">创建并添加元素</button>
                        <button onclick="insertBeforeDemo()">在前面插入元素</button>
                        <button onclick="insertAfterDemo()">在后面插入元素</button>
                        <button onclick="removeElementDemo()">移除最后一个元素</button>
                        <button onclick="clearElementsDemo()">清空所有子元素</button>
                    </div>
                    <div id="element-result" class="result-display"></div>
                </div>
            </section>

            <!-- 事件操作示例 -->
            <section id="event-operations" class="demo-section">
                <h2 class="demo-title">事件操作</h2>
                
                <div class="demo-item">
                    <h3>addEventListener / removeEventListener / delegateEvent</h3>
                    <div id="event-demo" class="demo-element">
                        <button class="event-btn">点击我 1</button>
                        <button class="event-btn">点击我 2</button>
                        <button class="event-btn">点击我 3</button>
                    </div>
                    <div class="button-group">
                        <button onclick="addEventListenerDemo()">添加点击事件</button>
                        <button onclick="removeEventListenerDemo()">移除点击事件</button>
                        <button onclick="delegateEventDemo()">使用事件委托</button>
                        <button onclick="dispatchEventDemo()">触发自定义事件</button>
                        <button onclick="addNewButtonDemo()">添加新按钮</button>
                    </div>
                    <div id="event-result" class="result-display"></div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>更多示例请查看其他模块：
                <a href="../math/">数学模块</a> |
                <a href="../validate/">验证模块</a> |
                <a href="../time/">时间模块</a>
            </p>
        </footer>
    </div>

    <script type="module">
        // 注意：在实际项目中，你需要正确配置模块路径
        // 这里使用模拟的函数来演示功能
        
        // 模拟 DOM 工具函数
        const domUtils = {
            addClass: (element, className) => {
                element.classList.add(className);
            },
            removeClass: (element, className) => {
                element.classList.remove(className);
            },
            toggleClass: (element, className) => {
                element.classList.toggle(className);
            },
            hasClass: (element, className) => {
                return element.classList.contains(className);
            },
            setStyle: (element, property, value) => {
                if (typeof property === 'object') {
                    Object.assign(element.style, property);
                } else {
                    element.style[property] = value;
                }
            },
            getStyle: (element, property) => {
                return getComputedStyle(element)[property];
            },
            setAttribute: (element, name, value) => {
                element.setAttribute(name, value);
            },
            getAttribute: (element, name) => {
                return element.getAttribute(name);
            },
            removeAttribute: (element, name) => {
                element.removeAttribute(name);
            },
            hasAttribute: (element, name) => {
                return element.hasAttribute(name);
            },
            setText: (element, text) => {
                element.textContent = text;
            },
            getText: (element) => {
                return element.textContent;
            },
            setHTML: (element, html) => {
                element.innerHTML = html;
            },
            getHTML: (element) => {
                return element.innerHTML;
            },
            createElement: (tagName, attributes = {}) => {
                const element = document.createElement(tagName);
                Object.entries(attributes).forEach(([key, value]) => {
                    element.setAttribute(key, value);
                });
                return element;
            },
            appendChild: (parent, child) => {
                parent.appendChild(child);
            },
            removeChild: (parent, child) => {
                parent.removeChild(child);
            },
            addEventListener: (element, event, handler) => {
                element.addEventListener(event, handler);
            },
            removeEventListener: (element, event, handler) => {
                element.removeEventListener(event, handler);
            }
        };

        // 将函数绑定到全局作用域以供按钮调用
        window.domUtils = domUtils;
        
        // 类名操作示例函数
        window.addClassDemo = () => {
            const element = document.getElementById('class-demo');
            domUtils.addClass(element, 'active');
            document.getElementById('class-result').textContent = '已添加 active 类';
        };
        
        window.removeClassDemo = () => {
            const element = document.getElementById('class-demo');
            domUtils.removeClass(element, 'active');
            document.getElementById('class-result').textContent = '已移除 active 类';
        };
        
        window.toggleClassDemo = () => {
            const element = document.getElementById('class-demo');
            domUtils.toggleClass(element, 'active');
            const hasClass = domUtils.hasClass(element, 'active');
            document.getElementById('class-result').textContent = `切换 active 类，当前状态: ${hasClass ? '有' : '无'}`;
        };
        
        window.checkClassDemo = () => {
            const element = document.getElementById('class-demo');
            const hasClass = domUtils.hasClass(element, 'active');
            document.getElementById('class-result').textContent = `检查结果: ${hasClass ? '包含' : '不包含'} active 类`;
        };

        // 样式操作示例函数
        window.setColorDemo = () => {
            const element = document.getElementById('style-demo');
            domUtils.setStyle(element, 'color', 'red');
            document.getElementById('style-result').textContent = '已设置颜色为红色';
        };
        
        window.setFontSizeDemo = () => {
            const element = document.getElementById('style-demo');
            domUtils.setStyle(element, 'fontSize', '20px');
            document.getElementById('style-result').textContent = '已设置字体大小为 20px';
        };
        
        window.setMultipleStylesDemo = () => {
            const element = document.getElementById('style-demo');
            domUtils.setStyle(element, {
                backgroundColor: '#4caf50',
                color: 'white',
                padding: '15px',
                borderRadius: '8px'
            });
            document.getElementById('style-result').textContent = '已设置多个样式属性';
        };
        
        window.getStyleDemo = () => {
            const element = document.getElementById('style-demo');
            const color = domUtils.getStyle(element, 'color');
            const fontSize = domUtils.getStyle(element, 'fontSize');
            document.getElementById('style-result').textContent = `当前样式 - 颜色: ${color}, 字体大小: ${fontSize}`;
        };
        
        window.resetStyleDemo = () => {
            const element = document.getElementById('style-demo');
            element.style.cssText = '';
            document.getElementById('style-result').textContent = '已重置所有样式';
        };

        // 其他示例函数...
        // (由于篇幅限制，这里只展示部分函数，实际使用时需要实现所有功能)
    </script>
</body>
</html>
